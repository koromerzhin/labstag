{% set showaside = true %}
{% set mainclass = "main-home" %}
{% import "macro.html.twig" as macro_site %}
{% extends 'skeleton/home.html.twig' %}
{% block aside %}
    <div class="aside-lists">
        {% if archives|length != 0 %}
        <div class="aside-list">
            <h4>{{ "Archives"|trans }}</h4>
            <ol>
                {% for archive in archives %}
                <li>
                    <a href="{{ path('post_archive', {'code': archive.code}) }}">{{ archive.published|format_datetime(pattern="MMMM Y") }}</a>
                </li>
                {% endfor %}
            </ol>
        </div>
        {% endif %}
        {% include "front/aside.html.twig" %}
    </div>
{% endblock %}
{% block header %}
    {% set img = attachment(post.img) %}
    {% if img is not null and img.name is not null %}
        <picture class="header_post_img">
            <img alt="{{ post.title|e('html_attr') }}" src="{{ asset(img.name) | imagefilter('my_thumb') }}" />
        </picture>
    {% endif %}
{% endblock %}
{% block section %}
    <div class="post_data">
        <h2 class="post_title">{{ post.title }}</h2>
        <div class="post_date">
            {{ post.published|format_datetime(pattern=formatdatetime.public) }} by
            {{ macro_site.user(post.refuser, path('post_user', {'username': post.refuser.username})) }}
            {% set state = guard_route('admin_post_edit') %}
            {% if state == true %}
                <a href="{{ path('admin_post_edit', {'id': post.id}) }}" target="_blank">{{ "Modifier"|trans }}</a>
            {% endif %}
        </div>
        <div class="post_content">
            {{ post.content|raw }}
        </div>
    </div>
{% endblock %}
