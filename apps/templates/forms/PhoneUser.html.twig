{% use "tmpl/form_themes.html.twig" %}
{% set state = guard_route('api_check_phone') %}
{% if state == true %}
    {% set url = path('api_check_phone', {'_format': 'json'}) %}
{% else %}
    {% set url = '#' %}
{% endif %}
<div class="row" data-url="{{ url }}">
    {% set number = row['numero'].vars.value %}
    {% set country = row['country'].vars.value %}
    {% set verif = phone_valid(number, country) %}
    {% for input in row %}
        <div class="col-6">
            {% if input.vars.name == 'numero' %}
                {{ form_row(input, {'attr': {'class': verif ? 'is-valid' : 'is-invalid'}}) }}
            {% else %}
                {{ form_row(input) }}
            {% endif %}
        </div>
    {% endfor %}
    {% if allow_delete %}
        <div class="text-center col-6">
            {{ block('collection_delete') }}
        </div>
    {% endif %}
</div>
